"use strict";(self["webpackChunkdemo03"]=self["webpackChunkdemo03"]||[]).push([[497],{7291:function(t,e,s){s.d(e,{Z:function(){return h}});var a=function(){var t=this,e=t._self._c;return t.contentData?e("div",{ref:"contentList",staticClass:"content-list",on:{click:t.addHistoryData}},[t.contentData.hot?e("div",{staticClass:"hot"},[e("div",{staticClass:"hot-icon"}),e("div",{staticClass:"hot-text"},[t._v("热门")])]):t._e(),e("div",{staticClass:"content-top-user"},[e("div",{staticClass:"user-left"},[e("div",{staticClass:"imgbox",on:{click:t.goToUserInside}},[e("img",{staticClass:"auto-img",attrs:{src:t.contentData.user.thumb,alt:""}})]),e("div",{staticClass:"user-name"},[t._v(t._s(t.contentData.user.login))])]),e("div",{staticClass:"user-right"},["userInside"!=this.$route.name?e("div",{staticClass:"follow-icon",on:{click:t.toFollow}},[t._v(" "+t._s(1==t.isFollow?"已关注":"关注")+" ")]):t._e(),e("div",{staticClass:"delete-icon",on:{click:t.deleteData}},[e("van-icon",{attrs:{name:"cross"}})],1)])]),e("div",{staticClass:"title",style:{fontStyle:"video"==t.contentData.format}},[t._v(" "+t._s(t.contentData.content)+" ")]),"video"==t.contentData.format?e("div",{staticClass:"video-box"},[e("div",{staticClass:"bg-click",on:{click:t.goToVideoInside}}),e("img",{staticClass:"bg",attrs:{src:t.contentData.pic_url,alt:""}}),e("div",{staticClass:"bg-blur"}),e("video",{ref:"video",attrs:{muted:"",src:t.contentData.high_url,controls:"",autoplay:""},domProps:{muted:!0}})]):t._e(),t.contentData.attachments?e("div",{staticClass:"photo-box"},t._l(t.contentData.attachments,(function(s,a){return e("div",{key:a,staticClass:"imgbox",on:{click:function(e){return t.PreviewImage(a)}}},["image"==s.format?e("img",{staticClass:"auto-img",attrs:{src:s.high_url,alt:""}}):t._e(),"gif"==s.format?e("video",{attrs:{muted:"",src:s.high_url,autoplay:"",loop:""},domProps:{muted:!0}}):t._e()])})),0):t._e(),t.contentData.hot_comment&&"comment"!=this.$route.name?e("div",{staticClass:"hot-comment-box"},[e("div",{staticClass:"content-top-user"},[e("div",{staticClass:"user-left"},[e("div",{staticClass:"imgbox"},[e("img",{staticClass:"auto-img",attrs:{src:t.contentData.hot_comment.user.thumb,alt:""}})]),e("div",{staticClass:"user-name"},[t._v(t._s(t.contentData.hot_comment.user.login))])]),e("div",{staticClass:"user-right"},[t._v(" "+t._s(t.contentData.hot_comment.like_count)+" 赞 ")])]),e("div",{staticClass:"content-text"},[t._v(t._s(t.contentData.hot_comment.content))])]):t._e(),e("div",{staticClass:"bottom-icon"},[e("div",{staticClass:"bottom-icon-left"},[e("div",{staticClass:"icon like",class:{likeActive:t.isLike},on:{click:t.toLike}},[e("div",{staticClass:"like-count"},[t._v(t._s(t.contentData.votes.up))])]),e("div",{staticClass:"icon dislike",class:{dislikeActive:t.isDislike},on:{click:t.toDislike}})]),e("div",{staticClass:"bottom-icon-right"},[e("div",{staticClass:"icon comment",on:{click:t.goToComment}},[e("div",{staticClass:"comment-count"},[t._v(" "+t._s(t.contentData.comments_count>0?t.contentData.comments_count:"评论")+" ")])]),e("div",{staticClass:"icon share",on:{click:function(e){return t.shareHandel()}}},[e("div",{staticClass:"share-count"},[t._v(" "+t._s(t.contentData.share_count>0?t.contentData.share_count:"分享")+" ")])])])]),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}}),e("router-view")],1):t._e()},i=[],o=(s(4735),s(3980)),n=(s(8146),s(8848)),l=(s(7658),s(541),s(6369)),c={setup(){const t=(0,l.iH)(!1),e=[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}],s=e=>{(0,n.Z)(e.name),t.value=!1};return{options:e,onSelect:s,showShare:t}},props:{allContentData:{},contentData:{},isAutoplay:{},loading:{},isFollow:{},isLike:{},isDislike:{},index:{}},data(){return{contentListHeight:0,fontStyle:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},playState:!1}},watch:{isAutoplay(t){1==t&&"video"==this.contentData.format?(this.$refs.video.play(),this.playState=!0):0==t&&"video"==this.contentData.format&&(this.$refs.video.pause(),this.playState=!1)},loading(t){0==t&&this.toAutoplay()}},created(){this.$nextTick((()=>{this.toAutoplay()}))},methods:{toAutoplay(){this.$refs.contentList&&(this.contentListHeight=this.$refs.contentList.clientHeight,this.$emit("getVideoHeight",this.contentListHeight))},toFollow(){let t=window.localStorage.getItem("token");t?this.$emit("getFollowState"):this.$router.push({name:"beforeLogin"})},toLike(){this.$emit("getLikeState")},toDislike(){this.$emit("getDislikeState")},shareHandel(){let t=window.localStorage.getItem("token");t?(this.showShare=!0,this.$emit("addShareCount")):this.$router.push({name:"beforeLogin"})},goToVideoInside(){let t=this.allContentData.filter((t=>"video"==t.format));window.localStorage.setItem("VideoContentData",JSON.stringify(t)),this.$router.push({name:"VideoInside",params:{index:this.index}})},PreviewImage(t){let e=[];this.contentData.attachments.forEach((t=>{e.push(t.high_url)})),(0,o.Z)({images:e,startPosition:t})},deleteData(){let t=window.localStorage.getItem("token");t?this.$emit("deleteData"):this.$router.push({name:"beforeLogin"})},goToComment(){this.$emit("goTocomment")},goToUserInside(){"userInside"!=this.$route.name&&this.$router.push({name:"userInside",params:{id:this.contentData.user.id}})},addHistoryData(){let t=JSON.parse(window.localStorage.getItem("historyData"));if(t){let e=[];t.forEach((t=>{-1==e.indexOf(t.id)&&e.push(t.id)})),-1==e.indexOf(this.contentData.id)&&(t.unshift(this.contentData),window.localStorage.setItem("historyData",JSON.stringify(t)))}else{let t=[];t.unshift(this.contentData),window.localStorage.setItem("historyData",JSON.stringify(t))}}}},r=c,d=s(1001),u=(0,d.Z)(r,a,i,!1,null,"35773a9f",null),h=u.exports},2497:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-inside-view"},[e("div",{staticClass:"top-nav"},[e("div",{staticClass:"goback",on:{click:t.goBack}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"ellipsis"}})],1)]),null!=t.userContentData?e("div",{staticClass:"top-user"},[e("div",{staticClass:"layer"}),e("div",{staticClass:"user-bg",style:"backgroundImage:url("+t.userContentData.medium+")"},[e("div",{staticClass:"bg-layer"})]),e("div",{staticClass:"user-icon"},[e("div",{staticClass:"imgbox"},[e("img",{staticClass:"auto-img",attrs:{src:t.userContentData.thumb,alt:""}})]),e("div",{staticClass:"icon-box"},[e("div",{staticClass:"icon chat"},[e("van-icon",{staticStyle:{"margin-right":"5px"},attrs:{name:"chat-o"}}),e("span",[t._v("聊天")])],1),e("div",{staticClass:"icon follow",on:{click:function(e){return t.getFollowState(t.userContentData)}}},[e("van-icon",{staticStyle:{"margin-right":"5px"},attrs:{name:"plus"}}),e("span",[t._v(t._s(t.userContentData.isFollow?"已关注":"关注"))])],1)])]),e("div",{staticClass:"user-name"},[e("div",{staticClass:"name"},[t._v(t._s(t.userContentData.login))]),e("div",{staticClass:"male",class:{manstyle:"M"==t.userContentData.gender}},[t._v(" "+t._s("M"==t.userContentData.gender?"♂":"F"==t.userContentData.gender?"♀":"")+" "+t._s(t.userContentData.age)+" ")])]),e("div",{staticClass:"user-tag"},[e("div",{staticClass:"tag"},[t._v("IP:"+t._s(t.userContentData.ip_location))]),e("div",{staticClass:"tag"},[t._v(t._s(t.userContentData.haunt))]),e("div",{staticClass:"tag"},[t._v(t._s(t.userContentData.astrology))])]),t._m(0)]):t._e(),e("div",{ref:"contentWrap",staticClass:"content-wrap",on:{"&scroll":function(e){return t.contentWrapScroll.apply(null,arguments)}}},t._l(t.contentData,(function(s,a){return e("div",{key:s.id,staticClass:"content-list-wrap"},[e("VideoCom",{attrs:{allContentData:t.contentData,scrollTop:t.scrollTop,contentData:s,isAutoplay:0==a||s.isAutoplay,loading:t.loading,isFollow:s.isFollow,isDislike:s.isDislike,isLike:s.isLike,index:a},on:{getVideoHeight:function(e){return t.getVideoHeight(a,e)},getFollowState:function(e){return t.getFollowState(s)},getLikeState:function(e){return t.getLikeState(s)},getDislikeState:function(e){return t.getDislikeState(s)},addShareCount:function(e){return t.addShareCount(s)},deleteData:function(e){return t.deleteData(s)},goTocomment:function(e){return t.goTocomment(s)}}})],1)})),0)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-data"},[e("div",{staticClass:"get liked"},[e("span",[t._v("105.1K")]),t._v(" 获赞")]),e("div",{staticClass:"get follow"},[e("span",[t._v("150")]),t._v(" 关注")]),e("div",{staticClass:"get fans"},[e("span",[t._v("222")]),t._v(" 粉丝")])])}];s(7658);const o=({axios:t})=>t.get("/JSON/user/userdetali.json"),n=({axios:t})=>t.get("/JSON/user/userContent.json");var l=s(9039),c=s(7291),r={name:"userInside",components:{VideoCom:c.Z},data(){return{userContentData:null,contentData:[],videoTotalHeight:0,loading:!0,timer:null,goToTopIconState:!1,scrollTop:0,isFollow:!1}},created(){this.getUserDetailData(),this.getUserContentData()},activated(){this.timer=setTimeout((()=>{this.getFollowedData(),this.timer=null}),100)},watch:{"contentData.length"(){this.timer=setTimeout((()=>{this.getFollowedData(),this.timer=null}),100)}},methods:{goBack(){this.$router.go(-1)},getUserDetailData(){o({axios:this.$axios}).then((t=>{t.data.userdata["isFollow"]=!1,this.userContentData=t.data.userdata}))},getUserContentData(){n({axios:this.$axios}).then((({data:t})=>{t.items.forEach((t=>{t["isAutoplay"]=!1,t["isFollow"]=!1,t["isLike"]=!1,t["isDislike"]=!1})),this.contentData.push(...t.items)}))},getVideoHeight(t,e){this.lastVideoIndex<t&&(this.lastVideoIndex=t),this.lastVideoIndex==t&&(this.lastVideoHeight=e),this.videoTotalHeight+=e},getFollowState(t){t.isFollow=!t.isFollow;let e=JSON.parse(window.localStorage.getItem("followedData")),s=[];e.forEach((t=>{s.push(t.id)})),t.isFollow&&-1==s.indexOf(t.id)?(e.push(t),window.localStorage.setItem("followedData",JSON.stringify(e))):e.forEach(((s,a)=>{s.id==t.id&&(e.splice(a,1),window.localStorage.setItem("followedData",JSON.stringify(e)))}))},getLikeState(t){t.isLike=!t.isLike,t.isLike?(t.isDislike=!1,t.votes.up++):t.votes.up--},getDislikeState(t){t.isDislike=!t.isDislike,t.isDislike&&t.isLike&&(t.isLike=!1,t.votes.up--)},addShareCount(t){t.share_count++},deleteData(t){this.$dialog.confirm({title:"确定要删除吗?"}).then((()=>{this.contentData.forEach(((e,s)=>{e==t&&this.contentData.splice(s,1)}))})).catch((()=>{}))},getFollowedData(){let t=JSON.parse(window.localStorage.getItem("followedData")),e=[];t.forEach((t=>{e.push(t.id)})),-1!=e.indexOf(this.userContentData.uid)?this.userContentData.isFollow=!0:this.userContentData.isFollow=!1},goTocomment(t){window.localStorage.setItem("commentContentData",JSON.stringify(t));let e=t.id;125654473!=e&&125657703!=e&&(e=125654473),this.$router.push(`/comment?id=${e}`)},contentWrapScroll:(0,l.P)((function(){this.scrollTop=this.$refs.contentWrap.scrollTop,this.scrollTop>=150?this.goToTopIconState=!0:this.goToTopIconState=!1}),500)}},d=r,u=s(1001),h=(0,u.Z)(d,a,i,!1,null,"45cbe736",null),m=h.exports}}]);