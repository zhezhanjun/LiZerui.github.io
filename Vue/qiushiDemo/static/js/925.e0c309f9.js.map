{"version":3,"file":"static/js/925.e0c309f9.js","mappings":"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","sources":["webpack://demo03/./src/components/DynamicCom/dynamicCom.vue","webpack://demo03/src/components/DynamicCom/dynamicCom.vue","webpack://demo03/./src/components/DynamicCom/dynamicCom.vue?00f3","webpack://demo03/./src/components/DynamicCom/dynamicCom.vue?5482","webpack://demo03/./src/views/DynamicView/NearbyContentView.vue","webpack://demo03/src/views/DynamicView/NearbyContentView.vue","webpack://demo03/./src/views/DynamicView/NearbyContentView.vue?ef69","webpack://demo03/./src/views/DynamicView/NearbyContentView.vue?fffe","webpack://demo03/./src/api/dynamic/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"contentList\",staticClass:\"content-list\"},[_c('div',{staticClass:\"content-top-user\"},[_c('div',{staticClass:\"user-left\"},[_c('div',{staticClass:\"imgbox\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.contentData.user.thumb,\"alt\":\"\"}})]),_c('div',{staticClass:\"user-name-wrap\"},[_c('div',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.contentData.user.login))]),_c('div',{staticClass:\"male\",class:{ manstyle: _vm.contentData.user.gender == 'M' }},[_vm._v(\" \"+_vm._s(_vm.contentData.user.gender == \"M\" ? \"♂\" : _vm.contentData.user.gender == \"F\" ? \"♀\" : \"\")+_vm._s(_vm.contentData.user.age)+\" \")])]),_c('div',{staticClass:\"time\"},[_vm._v(\"18小时前\")])]),_c('div',{staticClass:\"user-right\"},[_c('div',{staticClass:\"follow-icon\",on:{\"click\":_vm.toFollow}},[_vm._v(\" \"+_vm._s(_vm.contentData.isFollow ? \"已关注\" : \"关注\")+\" \")]),_c('div',{staticClass:\"delete-icon\",on:{\"click\":_vm.deleteData}},[_c('van-icon',{attrs:{\"name\":\"cross\"}})],1)])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"content-text\",domProps:{\"innerHTML\":_vm._s(_vm.contentData.content)}}),_vm._l((_vm.contentData.pic_urls),function(item,index){return _c('div',{key:index,staticClass:\"imgbox\",on:{\"click\":function($event){return _vm.PreviewImage(index)}}},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":item.pic_url,\"alt\":\"\"}})])})],2),_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"address\"},[_vm._v(_vm._s(_vm.contentData.distance))]),_c('div',{staticClass:\"bottom-icon-right\"},_vm._l((_vm.iconData),function(item,index){return _c('div',{key:index,staticClass:\"icon\",on:{\"click\":function($event){return _vm.iconClickHandel(item)}}},[_c('img',{staticClass:\"auto-img\",class:{ likeStyle: _vm.contentData.isLike && item.title == '点赞' },attrs:{\"src\":item.title == '点赞' && _vm.contentData.isLike == true\n              ? item.activeIcon\n              : item.icon},on:{\"click\":function($event){return _vm.goToComment(item)}}}),_c('div',{staticClass:\"count\"},[_vm._v(\" \"+_vm._s(index == 0 ? _vm.contentData.share_count : index == 1 ? _vm.contentData.comment_count : index == 2 ? _vm.contentData.like_count : \"\")+\" \")])])}),0)]),_c('van-share-sheet',{attrs:{\"title\":\"立即分享给好友\",\"options\":_vm.options},on:{\"select\":_vm.onSelect},model:{value:(_vm.showShare),callback:function ($$v) {_vm.showShare=$$v},expression:\"showShare\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content-list\" ref=\"contentList\">\r\n    <div class=\"content-top-user\">\r\n      <div class=\"user-left\">\r\n        <div class=\"imgbox\">\r\n          <img class=\"auto-img\" :src=\"contentData.user.thumb\" alt=\"\" />\r\n        </div>\r\n        <div class=\"user-name-wrap\">\r\n          <div class=\"user-name\">{{ contentData.user.login }}</div>\r\n          <div\r\n            class=\"male\"\r\n            :class=\"{ manstyle: contentData.user.gender == 'M' }\"\r\n          >\r\n            {{\r\n              contentData.user.gender == \"M\"\r\n                ? \"♂\"\r\n                : contentData.user.gender == \"F\"\r\n                ? \"♀\"\r\n                : \"\"\r\n            }}{{ contentData.user.age }}\r\n          </div>\r\n        </div>\r\n        <div class=\"time\">18小时前</div>\r\n      </div>\r\n      <div class=\"user-right\">\r\n        <div class=\"follow-icon\" @click=\"toFollow\">\r\n          {{ contentData.isFollow ? \"已关注\" : \"关注\" }}\r\n        </div>\r\n        <div class=\"delete-icon\" @click=\"deleteData\">\r\n          <van-icon name=\"cross\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"content-text\" v-html=\"contentData.content\"></div>\r\n      <div\r\n        class=\"imgbox\"\r\n        v-for=\"(item, index) in contentData.pic_urls\"\r\n        :key=\"index\"\r\n        @click=\"PreviewImage(index)\"\r\n      >\r\n        <img class=\"auto-img\" :src=\"item.pic_url\" alt=\"\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom\">\r\n      <div class=\"address\">{{ contentData.distance }}</div>\r\n      <div class=\"bottom-icon-right\">\r\n        <div\r\n          class=\"icon\"\r\n          v-for=\"(item, index) in iconData\"\r\n          :key=\"index\"\r\n          @click=\"iconClickHandel(item)\"\r\n        >\r\n          <img\r\n            class=\"auto-img\"\r\n            :class=\"{ likeStyle: contentData.isLike && item.title == '点赞' }\"\r\n            :src=\"\r\n              item.title == '点赞' && contentData.isLike == true\r\n                ? item.activeIcon\r\n                : item.icon\r\n            \"\r\n            @click=\"goToComment(item)\"\r\n          />\r\n          <div class=\"count\">\r\n            {{\r\n              index == 0\r\n                ? contentData.share_count\r\n                : index == 1\r\n                ? contentData.comment_count\r\n                : index == 2\r\n                ? contentData.like_count\r\n                : \"\"\r\n            }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <van-share-sheet\r\n      v-model:show=\"showShare\"\r\n      title=\"立即分享给好友\"\r\n      :options=\"options\"\r\n      @select=\"onSelect\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { Toast, ImagePreview } from \"vant\";\r\nexport default {\r\n  setup() {\r\n    const showShare = ref(false);\r\n    const options = [\r\n      { name: \"微信\", icon: \"wechat\" },\r\n      { name: \"微博\", icon: \"weibo\" },\r\n      { name: \"复制链接\", icon: \"link\" },\r\n      { name: \"分享海报\", icon: \"poster\" },\r\n      { name: \"二维码\", icon: \"qrcode\" },\r\n    ];\r\n\r\n    const onSelect = (option) => {\r\n      Toast(option.name);\r\n      showShare.value = false;\r\n    };\r\n\r\n    return {\r\n      options,\r\n      onSelect,\r\n      showShare,\r\n    };\r\n  },\r\n  props: {\r\n    contentData: {},\r\n  },\r\n  data() {\r\n    return {\r\n      //底部图标\r\n      iconData: [\r\n        {\r\n          icon: require(\"@/assets/images/home/Vdz.png\"),\r\n          title: \"分享\",\r\n        },\r\n        {\r\n          icon: require(\"@/assets/images/home/u0q.png\"),\r\n          title: \"评论\",\r\n        },\r\n        {\r\n          icon: require(\"@/assets/images/home/WVW.png\"),\r\n          activeIcon: require(\"@/assets/images/home/Xgm.png\"),\r\n          title: \"点赞\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.$nextTick(() => {\r\n      this.sentHeight();\r\n    });\r\n  },\r\n  methods: {\r\n    //点赞和分享\r\n    iconClickHandel(item) {\r\n      if (item.title == \"点赞\") {\r\n        this.$emit(\"toLike\");\r\n      }\r\n      if (item.title == \"分享\") {\r\n        this.showShare = true;\r\n        this.$emit(\"addShareCount\");\r\n      }\r\n    },\r\n    //关注\r\n    toFollow() {\r\n      let token = window.localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        this.$router.push({ name: \"beforeLogin\" });\r\n      } else {\r\n        this.$emit(\"getFollowState\");\r\n      }\r\n    },\r\n    //删除\r\n    deleteData() {\r\n      let token = window.localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        this.$router.push({ name: \"beforeLogin\" });\r\n      } else {\r\n        this.$emit(\"deleteData\");\r\n      }\r\n    },\r\n    //图片浏览\r\n    PreviewImage(index) {\r\n      let imgs = [];\r\n      this.contentData.pic_urls.forEach((item) => {\r\n        imgs.push(item.pic_url);\r\n      });\r\n      ImagePreview({\r\n        images: imgs,\r\n        startPosition: index,\r\n      });\r\n    },\r\n    //向父级传送高度\r\n    sentHeight() {\r\n      if (this.$refs.contentList) {\r\n        this.$emit(\"getHeight\", this.$refs.contentList.clientHeight);\r\n      }\r\n    },\r\n    //前往评论区\r\n    goToComment(item) {\r\n      if (item.title == \"评论\"&&!this.$route.query.id) {\r\n        this.$emit(\"goTocomment\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.content-list {\r\n  width: 100%;\r\n  .content-top-user {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: 10px;\r\n    .user-left {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      position: relative;\r\n      .imgbox {\r\n        width: 35px;\r\n        height: 35px;\r\n        border-radius: 999px;\r\n        margin: 10px 10px 0 0;\r\n        overflow: hidden;\r\n      }\r\n      .user-name-wrap {\r\n        display: flex;\r\n        .user-name {\r\n          color: #666;\r\n          font-size: 14px;\r\n        }\r\n        .male {\r\n          width: 40px;\r\n          height: 18px;\r\n          border-radius: 999px;\r\n          margin: -5px 0 0 5px;\r\n          background-color: rgb(251, 109, 142);\r\n          text-align: center;\r\n          line-height: 18px;\r\n          color: #fff;\r\n          &.manstyle {\r\n            background-color: rgb(25, 140, 228);\r\n          }\r\n        }\r\n      }\r\n      .time {\r\n        position: absolute;\r\n        left: 45px;\r\n        bottom: -2px;\r\n        color: #999;\r\n      }\r\n    }\r\n    .user-right {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      font-size: 12px;\r\n      width: 62px;\r\n      .follow-icon {\r\n        width: 50px;\r\n        height: 22px;\r\n        flex: 0 0 50px;\r\n        border-radius: 999px;\r\n        text-align: center;\r\n        background-color: #eee;\r\n        line-height: 22px;\r\n        font-weight: 600;\r\n        margin-left: -10px;\r\n      }\r\n      .delete-icon {\r\n        color: #aaa;\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    margin-top: 10px;\r\n    padding: 0 20px 0 40px;\r\n    .content-text {\r\n      font-size: 16px;\r\n      line-height: 25px;\r\n      letter-spacing: 2px;\r\n    }\r\n    .imgbox {\r\n      width: max(250px);\r\n      border-radius: 6px;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n  .bottom {\r\n    padding: 0 20px 0 40px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: 10px;\r\n    border-bottom: 1px solid #ddd;\r\n    padding-bottom: 10px;\r\n    .address {\r\n      font-weight: 600;\r\n    }\r\n    .bottom-icon-right {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      .icon {\r\n        width: 35px;\r\n        height: 35px;\r\n        border-radius: 999px;\r\n        background-repeat: no-repeat;\r\n        background-position: center center;\r\n        background-size: cover;\r\n        position: relative;\r\n        display: flex;\r\n        align-items: center;\r\n        margin-right: 30px;\r\n        img {\r\n          &.likeStyle {\r\n            transform: scale(0.6);\r\n          }\r\n        }\r\n\r\n        &:last-child {\r\n          margin-right: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./dynamicCom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./dynamicCom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dynamicCom.vue?vue&type=template&id=70aa6a97&scoped=true&\"\nimport script from \"./dynamicCom.vue?vue&type=script&lang=js&\"\nexport * from \"./dynamicCom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dynamicCom.vue?vue&type=style&index=0&id=70aa6a97&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70aa6a97\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"next-door-content-view\"},[_vm._m(0),_c('div',{staticClass:\"content-box\"},_vm._l((_vm.contentData),function(item){return _c('div',{key:item.id,staticClass:\"content-list-wrap\"},[_c('dynamicCom',{attrs:{\"contentData\":item},on:{\"toLike\":function($event){return _vm.toLike(item)},\"getFollowState\":function($event){return _vm.getFollowState(item)},\"addShareCount\":function($event){return _vm.addShareCount(item)},\"deleteData\":function($event){return _vm.deleteData(item)},\"getHeight\":function($event){return _vm.getHeight($event)},\"goTocomment\":function($event){return _vm.goTocomment(item)}}})],1)}),0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"top-wrap\"},[_c('div',{staticClass:\"img\"}),_c('div',{staticClass:\"text\"},[_c('div',{staticClass:\"tip\"},[_vm._v(\"开启地理位置权限\")]),_c('div',{staticClass:\"little-tip\"},[_vm._v(\"开启权限后您将能看到附近更多有趣的动态哦 ~\")])]),_c('div',{staticClass:\"btn\"},[_vm._v(\"去开启\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"next-door-content-view\">\r\n    <div class=\"top-wrap\">\r\n      <div class=\"img\"></div>\r\n      <div class=\"text\">\r\n        <div class=\"tip\">开启地理位置权限</div>\r\n        <div class=\"little-tip\">开启权限后您将能看到附近更多有趣的动态哦 ~</div>\r\n      </div>\r\n      <div class=\"btn\">去开启</div>\r\n    </div>\r\n    <div class=\"content-box\">\r\n      <div class=\"content-list-wrap\" v-for=\"item in contentData\" :key=\"item.id\">\r\n        <dynamicCom\r\n          :contentData=\"item\"\r\n          @toLike=\"toLike(item)\"\r\n          @getFollowState=\"getFollowState(item)\"\r\n          @addShareCount=\"addShareCount(item)\"\r\n          @deleteData=\"deleteData(item)\"\r\n          @getHeight=\"getHeight($event)\"\r\n          @goTocomment=\"goTocomment(item)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dynamicCom from \"@/components/DynamicCom/dynamicCom.vue\";\r\nimport { getDynamicNearbyContent } from \"@/api/dynamic\";\r\nexport default {\r\n  name: \"NearbyContentView\",\r\n  props: {\r\n    scrollTop: {},\r\n  },\r\n  components: {\r\n    dynamicCom,\r\n  },\r\n  data() {\r\n    return {\r\n      //数据\r\n      contentData: [],\r\n      //总高度\r\n      TotalHeight: 0,\r\n      //加载状态\r\n      loading: true,\r\n      //刷新状态\r\n      refreshState: false,\r\n      //所有容器的单个高度\r\n      HeightArr: [],\r\n      //获取数据的id\r\n      dataId: 0,\r\n      //刷新时获取的数据\r\n      refreshData: [],\r\n      //定时器延迟拿取数据\r\n      timer: null,\r\n      //上拉刷新\r\n      isLoading: false,\r\n    };\r\n  },\r\n  watch: {\r\n    scrollTop(newval, oldval) {\r\n      let Bottom = null;\r\n      if (this.TotalHeight > newval) {\r\n        Bottom = this.TotalHeight - newval;\r\n      }\r\n      // console.log(Bottom);\r\n      if (this.contentData.length > 0) {\r\n        let autoplayIndex = Math.round(\r\n          ((newval - 100 > 0 ? newval - 100 : 0) / this.TotalHeight) * 10\r\n        );\r\n        this.contentData.forEach((item, index) => {\r\n          if (autoplayIndex == index) {\r\n            item.isAutoplay = true;\r\n          } else {\r\n            item.isAutoplay = false;\r\n          }\r\n        });\r\n      }\r\n      if ((Bottom > 0 && Bottom < 500 && newval > oldval) || Bottom == null) {\r\n        if (this.loading) {\r\n          this.loading = false;\r\n          this.getDynamicNearbyContentData(1);\r\n        }\r\n      }\r\n      // console.log(this.contentData);\r\n    },\r\n    loading(newval) {\r\n      if (newval == false) {\r\n        this.TotalHeight = 0;\r\n        this.HeightArr = [];\r\n      }\r\n    },\r\n    \"contentData.length\"() {\r\n      this.timer = setTimeout(() => {\r\n        this.getFollowedData();\r\n        this.timer = null;\r\n      }, 100);\r\n    },\r\n  },\r\n  created() {\r\n    this.getDynamicNearbyContentData(this.dataId);\r\n  },\r\n  activated() {\r\n    //定时器延迟拿取数据\r\n    this.timer = setTimeout(() => {\r\n      this.getFollowedData();\r\n      this.timer = null;\r\n    }, 100);\r\n  },\r\n  methods: {\r\n    //获取数据\r\n    getDynamicNearbyContentData(dataparam) {\r\n      getDynamicNearbyContent({ axios: this.$axios }, dataparam).then(\r\n        ({ data }) => {\r\n          // console.log(data.data);\r\n          data.data.forEach((item) => {\r\n            item[\"isAutoplay\"] = false;\r\n            item[\"isFollow\"] = false;\r\n            item[\"isLike\"] = false;\r\n            let ZhReg = /^\\{/;\r\n            let res = ZhReg.test(item.content);\r\n            if (res) {\r\n              let Zh = item.content\r\n                .split(`\"qiushi_content\": \"`)[1]\r\n                .slice(0, -2);\r\n              item.content = unescape(Zh.replace(/\\\\/g, \"%\"));\r\n            }\r\n          });\r\n          this.contentData.push(...data.data);\r\n        }\r\n      );\r\n    },\r\n    //点赞\r\n    toLike(item) {\r\n      item.isLike = !item.isLike;\r\n      if (item.isLike) {\r\n        item.like_count++;\r\n      } else {\r\n        item.like_count--;\r\n      }\r\n    },\r\n    //关注\r\n    getFollowState(item) {\r\n      item.isFollow = !item.isFollow;\r\n      let followedData = JSON.parse(\r\n        window.localStorage.getItem(\"followedData\")\r\n      );\r\n      let idArr = [];\r\n      followedData.forEach((item) => {\r\n        idArr.push(item.id);\r\n      });\r\n      if (item.isFollow && idArr.indexOf(item.user.id) == -1) {\r\n        followedData.push(item.user);\r\n        window.localStorage.setItem(\r\n          \"followedData\",\r\n          JSON.stringify(followedData)\r\n        );\r\n      } else {\r\n        // console.log(followedData.indexOf(item.user));\r\n        followedData.forEach((item2, index) => {\r\n          if (item2.id == item.user.id) {\r\n            followedData.splice(index, 1);\r\n            window.localStorage.setItem(\r\n              \"followedData\",\r\n              JSON.stringify(followedData)\r\n            );\r\n          }\r\n        });\r\n      }\r\n    },\r\n    //分享\r\n    addShareCount(item) {\r\n      item.share_count++;\r\n    },\r\n    //删除\r\n    deleteData(item) {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"确定要删除吗?\",\r\n        })\r\n        .then(() => {\r\n          // on confirm\r\n          this.contentData.forEach((item2, index) => {\r\n            if (item2 == item) {\r\n              this.contentData.splice(index, 1);\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          // on cancel\r\n        });\r\n    },\r\n    //获取所有内容的高度\r\n    getHeight(val) {\r\n      this.TotalHeight += val;\r\n      if (this.dataId < 2) {\r\n        this.HeightArr.push(val);\r\n      } else {\r\n        this.refreshData.push(val);\r\n      }\r\n    },\r\n    //获取已关注\r\n    getFollowedData() {\r\n      let followedData = JSON.parse(\r\n        window.localStorage.getItem(\"followedData\")\r\n      );\r\n      let followedDataId = [];\r\n      followedData.forEach((item) => {\r\n        followedDataId.push(item.id);\r\n      });\r\n      this.contentData.forEach((item) => {\r\n        if (followedDataId.indexOf(item.user.id) != -1) {\r\n          item.isFollow = true;\r\n        } else {\r\n          item.isFollow = false;\r\n        }\r\n      });\r\n    },\r\n    //跳转评论详情页\r\n    goTocomment(item) {\r\n      console.log(item);\r\n      window.localStorage.setItem(\"commentContentData\", JSON.stringify(item));\r\n      let dataId = item.id;\r\n      if (dataId != 125654473 && dataId != 125657703) {\r\n        dataId = 125654473;\r\n      }\r\n      this.$router.push(`/comment?id=${dataId}`);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.next-door-content-view {\r\n  width: 100%;\r\n  margin-top: 65px;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  .top-wrap {\r\n    width: 100%;\r\n    height: 100px;\r\n    border-bottom: 1px solid #ddd;\r\n    display: flex;\r\n    padding-bottom: 20px;\r\n    position: relative;\r\n    .img {\r\n      width: 88px;\r\n      height: 88px;\r\n      flex: 0 0 88px;\r\n      margin: 10px 10px 0 0;\r\n      background-image: url(\"@/assets/images/Snipaste_2022-11-19_16-55-20.jpg\");\r\n      background-repeat: no-repeat;\r\n      background-size: cover;\r\n      background-position: center center;\r\n    }\r\n    .text {\r\n      width: 100%;\r\n      height: 50px;\r\n      .tip {\r\n        font-weight: 600;\r\n        font-size: 14px;\r\n        line-height: 20px;\r\n      }\r\n      .little-tip {\r\n        color: #888;\r\n        line-height: 25px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .btn {\r\n      width: 70px;\r\n      height: 30px;\r\n      background-color: rgb(253, 234, 49);\r\n      position: absolute;\r\n      right: 0;\r\n      bottom: 20px;\r\n      border-radius: 4px;\r\n      text-align: center;\r\n      line-height: 32px;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .content-box {\r\n    margin-bottom: 50px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NearbyContentView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NearbyContentView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NearbyContentView.vue?vue&type=template&id=a0215a26&scoped=true&\"\nimport script from \"./NearbyContentView.vue?vue&type=script&lang=js&\"\nexport * from \"./NearbyContentView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NearbyContentView.vue?vue&type=style&index=0&id=a0215a26&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a0215a26\",\n  null\n  \n)\n\nexport default component.exports","\r\n//动态隔壁api\r\nexport const getDynamicNearbyContent = ({axios},data) => {\r\n    return axios.get(`/JSON/dynamic/nearby${data}.json`)\r\n}\r\n//动态关注api\r\nexport const getDynamicFollowContent = ({axios},data) => {\r\n    return axios.get(`/JSON/dynamic/follow${data}.json`)\r\n}\r\n//动态话题api\r\nexport const getDynamicTopicsContent = ({axios},data) => {\r\n    return axios.get(`/JSON/dynamic/topics${data}.json`)\r\n}"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","contentData","user","thumb","_v","_s","login","class","manstyle","gender","age","on","toFollow","isFollow","deleteData","domProps","content","_l","pic_urls","item","index","key","$event","PreviewImage","pic_url","distance","iconData","iconClickHandel","likeStyle","isLike","title","activeIcon","icon","goToComment","share_count","comment_count","like_count","options","onSelect","model","value","showShare","callback","$$v","expression","staticRenderFns","setup","name","props","data","created","methods","imgs","images","startPosition","sentHeight","component","_m","id","toLike","getFollowState","addShareCount","getHeight","goTocomment","scrollTop","components","dynamicCom","TotalHeight","loading","refreshState","HeightArr","dataId","refreshData","timer","isLoading","watch","Bottom","activated","getDynamicNearbyContentData","getDynamicNearbyContent","axios","split","slice","window","followedData","idArr","JSON","confirm","then","catch","getFollowedData","followedDataId","console","get","getDynamicFollowContent"],"sourceRoot":""}